# Memories

Chains and Agents typically function without maintaining a state, treating each incoming query as a separate request, much like the underlying language models and chat models. 
However, in specific situations like chatbots, it is important to preserve a record of past interactions, spanning both short-term and long-term memory. This is where the Memory class becomes essential, offering the capability of remembering past interactions.


### ConversationBufferMemory

Buffer for storing conversation memory.

In LangChain `ConversationBufferMemory` is a type of memory that stores the messages in a conversation. It's capable of extracting these messages either as a string or as a list of messages. 

- **input_key:** Prompt variable name where the memory can find the user's input messages. It is a key or identifier that can be used to associate input data with a specific conversation turn in the conversation buffer memory.
- **memory_key:** Specifies the prompt variable name where the memory will store and retrieve the chat messages. It allows for the preservation of the conversation history throughout the interaction with the language model. Defaults to `chat_history`.
- **output_key:** Prompt variable name where the memory can store the output messages. As the input key, this allows for easy retrieval and manipulation of the messages.
- **return_messages:** Determines whether the history should be returned as a string or as a list of messages. If `return_messages` is set to True, the history will be returned as a list of messages. If `return_messages` is set to False or not specified, the history will be returned as a string. Defaults is `False`.

### ConversationBufferWindowMemory

Buffer for storing conversation memory but using a sliding window.

`ConversationBufferWindowMemory` is a variation of `ConversationBufferMemory` that maintains a list of the recent interactions in a conversation. It only keeps the last K interactions in memory, which can be useful for maintaining a sliding window of the most recent interactions without letting the buffer get too large. 


- **input_key:** Prompt variable name where the memory can find the user's input messages. It is a key or identifier that can be used to associate input data with a specific conversation turn in the conversation buffer memory.
- **memory_key:** Specifies the prompt variable name where the memory will store and retrieve the chat messages. It allows for the preservation of the conversation history throughout the interaction with the language model. Defaults to `chat_history`.
- **k:** Used to specify the number of interactions or messages that should be stored in the conversation buffer. It determines the size of the sliding window that keeps track of the most recent interactions.
- **output_key:** Prompt variable name where the memory can store the output messages. As the input key, this allows for easy retrieval and manipulation of the messages.
- **return_messages:** Determines whether the history should be returned as a string or as a list of messages. If `return_messages` is set to True, the history will be returned as a list of messages. If `return_messages` is set to False or not specified, the history will be returned as a string. Defaults is `False`.

### ConversationEntityMemory

Entity extractor & summarizer memory.

The purpose of `ConversationEntityMemory` is to incorporate intricate memory structures, specifically a key-value store, for entities referenced in a conversation. This key-value store facilitates the storage and retrieval of information relate to entities that have been mentioned throughout the conversation. The memory store can be directly examined and updated with new information. 

- **chat_history_key:** Specify a unique identifier for the chat history data associated with a particular entity. This allows for organizing and accessing the chat history data for each entity within the conversation entity memory. Defaults to `history`
- **input_key:** Used to specify the keys in the memory object where the input messages should be stored. This allows for easy retrieval and manipulation of the input messages.
- **k:** Refers to the number of entities that can be stored in the memory. It determines the maximum number of entities that can be stored and retrieved from the memory object. Defaults to `10`
- **output_key:** Designate the specific keys within the memory object where the output messages are to be stored. As the input key, this allows for easy retrieval and manipulation of the messages.
- **return_messages:** Determines whether the history should be returned as a string or as a list of messages. If `return_messages` is set to True, the history will be returned as a list of messages. If `return_messages` is set to False or not specified, the history will be returned as a string. Defaults is `False`.

### ConversationKGMemory


Knowledge graph memory for storing conversation memory.

Conversation Knowledge Graph Memory is a type of memory that uses a knowledge graph to recreate memory. It allows for the extraction of current entities and knowledge triplets from a new message, using previous messages as context. `ConversationKGMemory` can be used in a ConversationChain to provide relevant information and context to the AI's responses. It is initialized with ChatMessageHistory and provides methods to retrieve information from the knowledge graph.

- **input_key:** Prompt variable name where the memory can find the user's input messages. It is a key or identifier that can be used to associate input data with a specific conversation turn in the conversation buffer memory.
- **k:** Represents the number of previous conversation turns that will be stored in the memory. By setting "k" to 2, it means that the memory will retain the previous 2 conversation turns, allowing the model to access and utilize the information from those turns during the conversation. Defaults to `10`
- **memory_key:** Specifies the prompt variable name where the memory will store and retrieve the chat messages. It allows for the preservation of the conversation history throughout the interaction with the language model. Defaults to `chat_history`.
- **output_key:** Prompt variable name where the memory can store the output messages. As the input key, this allows for easy retrieval and manipulation of the messages.
- **return_messages:** Determines whether the history should be returned as a string or as a list of messages. If `return_messages` is set to True, the history will be returned as a list of messages. If `return_messages` is set to False or not specified, the history will be returned as a string. Defaults is `False`.

### ConversationSummaryMemory


Conversation summarizer to memory.

`ConversationSummaryMemory` is a type of memory that creates a summary of the conversation over time. It condenses information from the conversation and stores the current summary in memory. This memory can then be used to inject the summary of the conversation into a prompt or chain. It is particularly useful for longer conversations where keeping the entire message history in the prompt would take up too many tokens. ConversationSummaryMemory is initialized with ChatMessageHistory and can be used in a ConversationChain.

- **input_key:** Prompt variable name where the memory can find the user's input messages. It is a key or identifier that can be used to associate input data with a specific conversation turn in the conversation buffer memory.
- **memory_key:** Specifies the prompt variable name where the memory will store and retrieve the chat messages. It allows for the preservation of the conversation history throughout the interaction with the language model. Defaults to `chat_history`.
- **output_key:** Prompt variable name where the memory can store the output messages. As the input key, this allows for easy retrieval and manipulation of the messages.
- **return_messages:** Determines whether the history should be returned as a string or as a list of messages. If `return_messages` is set to True, the history will be returned as a list of messages. If `return_messages` is set to False or not specified, the history will be returned as a string. Defaults is `False`.

### PostgresChatMessageHistory


Memory store with Postgres

It is a memory module that allows for the storage and retrieval of chat message history using a PostgreSQL database. `PostgresChatMessageHistory` provides methods to add user and AI messages to the history and retrieve the stored messages. The connection to the PostgreSQL database is established using a connection string, which includes the necessary authentication and database information.


- **connection_string:** Refers to a string that contains the necessary information to establish a connection to a PostgreSQL database. The `connection_string` typically includes details such as the username, password, host, port, and database name required to connect to the PostgreSQL database.Defaults to `[postgresql://postgres:mypassword@localhost/chat_history](postgresql://postgres:mypassword@localhost/chat_history)`
- **session_id:** It is a unique identifier that is used to associate chat message history with a specific session or conversation.
- **table_name:** Refers to the name of the table in the PostgreSQL database where the chat message history will be stored. Defaults to `message_store`

### VectorRetrieverMemory


Class for a VectorStore-backed memory object.

`VectorRetrieverMemory` is a memory module that allows for the retrieval of vectors based on a given query. It is used to perform vector-based searches and retrievals within the Langchain ecosystem. The module is designed to work with vector databases and search engines, such as Pinecone, Vespa, or Milvus, to efficiently retrieve vectors based on similarity or other criteria.

- **input_key:** Used to specify the keys in the memory object where the input messages should be stored. This allows for easy retrieval and manipulation of the input messages.
- **memory_key:** Specifies the prompt variable name where the memory will store and retrieve the chat messages. It allows for the preservation of the conversation history throughout the interaction with the language model. Defaults to `chat_history`.
- **return_messages:** Determines whether the history should be returned as a string or as a list of messages. If `return_messages` is set to True, the history will be returned as a list of messages. If `return_messages` is set to False or not specified, the history will be returned as a string. Defaults is `False`.
